<div class="container">
      <p-panel header="Detraccion masiva prespuesto detalle" class="mb-3">
        <p-breadcrumb [model]="items" class="max-w-full"></p-breadcrumb>
    </p-panel>
    </div>
    <br/>
    <div class="card p-2">
            <!-- First row with 2 elements -->
        <div style="display: flex; width: 100%; margin-bottom: 1rem;">
            <div style="margin-right: 20px; flex: 1;">
                <label for="username" class="text-sm">Pago Nro: </label>
                <input pInputText id="username" aria-describedby="username-help"
                 [value]="pagonro" [disabled]="true"
                    style="width: 100%; height: 2.5rem;" />
            </div>

            <div style="flex: 1;">
                <label for="fecha" class="text-sm">Fecha: </label>
                <input id="fecha" [value]="fechaString" 
                [disabled]="true" style="width: 100%; height: 2.5rem;" />
                <!-- <p-calendar [disabled]="true" [(ngModel)]="fecha" style="width: 100%; height: 2.5rem;"
                    inputStyleClass="p-input-sm" dateFormat="dd/mm/yy"></p-calendar> -->
            </div>

            

        </div>

         <div style="display: flex; width: 100%; margin-bottom: 1rem;">
            <div style="margin-right: 20px; flex: 1;">
                <label for="motivo" class="text-sm">Motivo: </label>
                <input pInputText id="motivo" aria-describedby="motivo-help" [value]="motivo" [disabled]="true"
                    style="width: 100%; height: 2.5rem;" />
            </div>

            <div style="flex: 1;">
                <label for="medio-pago" class="text-sm">Medio Pago: </label>
                <input pInputText id="medio-pago" aria-describedby="medio-pago-help" [value]="medio"
                    [disabled]="true" style="width: 100%; height: 2.5rem;" />
            </div>
      </div>


      <div class="card p-2">
        <p-table [value]="detallePresupuesto" 
        sortField="item" sortMode="single" 
        rowGroupMode="subheader"
            
            [scrollable]="true" 
            scrollHeight="500px" [loading]="load"
            
            [globalFilterFields]="['ban02Ruc','razonsocial','ban02NroDoc']">
            <ng-template pTemplate="header">
                <tr>
                    <th rowspan="2">Item</th>
                    <th rowspan="2">RUC
                        <br>
                        <br>
                        <p-columnFilter type="text" field="ban02Ruc" placeholder="Buscar" ariaLabel="RUC"
                            [showMenu]="false" matchMode="contains"></p-columnFilter>
                    </th>
                    <th rowspan="2">Razon Social
                        <br>
                        <br>
                        <p-columnFilter type="text" field="razonsocial" placeholder="Buscar" ariaLabel="Razon Social"
                            [showMenu]="false" matchMode="contains"></p-columnFilter>
                    </th>
                    <th rowspan="2">Tipo Doc</th>
                    <th rowspan="2">Numero
                        <br>
                        <br>
                        <p-columnFilter type="text" field="ban02NroDoc" placeholder="Buscar" ariaLabel="Nro Documento"
                            [showMenu]="false" matchMode="contains"></p-columnFilter>
                    </th>
                    <th rowspan="2">Moneda <br>Original</th>
                    <th rowspan="2">Fecha <br>emision</th>
                    <th rowspan="2">Fecha <br>vencimiento</th>
                    <th rowspan="2">Importe <br>Total S/.</th>
                    <th rowspan="2">Importe <br>Total US$</th>

                    
                    <th colspan="2">Retencion</th>
                
                </tr>
                <tr>
                    

                    <th colspan="1">Importe <br/>Soles</th>
                    <th colspan="1">Importe <br/>Dolares</th>
         
                    
                </tr>
            </ng-template>

            <ng-template pTemplate="groupheader" let-groupData>
                <tr pRowGroupHeader>
                    <!--
                    <td colspan="8">
                        <div class="flex items-center gap-2">
                            <span class="font-bold">{{ groupData.ban02Proveedor }}</span>
                        </div>
                    </td>-->
                </tr>
            </ng-template>

        

            <ng-template pTemplate="body" let-detalle>
                <tr>
                     <td style="text-align: left;">{{ detalle.item }}</td>
                    <td style="text-align: left;">{{ detalle.ban02Ruc }}</td>
                    <td style="text-align: left;">{{ detalle.razonsocial }}</td>
                    <td style="text-align: left;">{{ detalle.nombreTipoDocumento }}</td>
                    <td style="text-align: left;">{{ detalle.ban02NroDoc }}</td>
                    <td
                       style="text-align: left;">
                        {{ detalle.nombremoneda }}</td>
                    <td style="text-align: left;">{{detalle.ban02FechaEmision}}</td>
                    <td style="text-align: left;">{{detalle.ban02FechaVencimiento}}</td>
                    <!--importe total Soles -->
                    <td style="text-align: right;">{{ detalle.ban02Soles |
                        number:'1.2-2' }}</td>
                        <!--importe total dolares -->
                    <td  style="text-align: right;">{{ detalle.ban02Dolares |
                        number:'1.2-2' }}</td>
                 
                 
                    <td  
                    style="text-align: right;" >
                        
                        {{ formatearNumero(detalle.ban02PagoSoles)
                            }}
                    </td>
                    <td 
                    style="text-align: right;">
                        
                        {{ formatearNumero(detalle.ban02PagoDolares)
                            }}
                    </td>
                  
                   
                </tr>
            </ng-template>
            <ng-template pTemplate="footer">
                <tr>
                <td colspan="9" class="text-right font-bold">
                    <td class="font-bold" style="text-align: left;">Sumas</td>
                    <td class="font-bold" style="text-align: right;">{{ formatearNumero(getTotalColumn('ban02PagoSoles')) }}</td>
                    <td class="font-bold" style="text-align: right;">{{ formatearNumero(getTotalColumn('ban02PagoDolares')) }}</td>
                </tr>
                <!--
                <tr>
                     <td colspan="11" class="text-right font-bold"></td>
                    <td class="font-bold" style="text-align: left;">Sumas</td>
                    <td class="font-bold" style="text-align: right;">{{ getTotalColumn('ban02PagoSoles') | number:'1.2-2' }}</td>
                    <td class="font-bold" style="text-align: right;">{{ getTotalColumn('ban02PagoDolares') | number:'1.2-2' }}</td>
                 
                    <td></td>
                </tr>-->
            </ng-template>  
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="12" style="text-align: center; font-weight: bold; padding: 1rem;">
                        No se encontraron registros
                    </td>
                </tr>
            </ng-template>


        </p-table>
    </div>





  </div>