<div style="margin:10px;">
    <p-panel header="Usuarios">
      <p class="m-0">
        <p-button (onClick)="agregarFilaUsuario()" icon="pi pi-plus" label="Nuevo" class="mr-3 mt-3"></p-button>
        <label>Buscar:</label>
        <input pInputText type="text" (input)="onFilter($event.target.value)" placeholder="Buscar usuario" />
      </p>
      <br />

      <!-- Tabla de usuarios -->
      <p class="m-0">
        <!-- <p-table
        editMode="row"
  [value]="usuarios"
  [paginator]="true"
  [rows]="5"
  [rowsPerPageOptions]="[5, 10, 20]"
  selectionMode="single"
  [(selection)]="seleccionarusuario"
  [tableStyle]="{ 'width': '800px', 'border': '1px solid black' }"
  [globalFilterFields]="['Nombre', 'NombreComp']"
> -->
  <!-- Encabezado de la tabla -->
  <!-- <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="Sistema">Sistema</th>
      <th pSortableColumn="Nombre">Nombre</th>
      <th pSortableColumn="Clave">Clave</th>
      <th>Acciones</th>
    </tr>
  </ng-template> -->

  <!-- Cuerpo de la tabla -->
  <!-- <ng-template pTemplate="body" let-usuario let-i="rowIndex">
    <tr [pSelectableRow]="usuario" (click)="selectUsuario(usuario)">
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Sistema" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Sistema }}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Nombre" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Nombre }}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Clave" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Clave }}
          </ng-template>
        </p-cellEditor>
      </td>
      <td>
        <p-button
          icon="pi pi-pencil"
          class="mr-2"
          [rounded]="true"
          [outlined]="true"
          (click)="VerActualizarRegistro(usuario)"
        ></p-button>
        <p-button
          icon="pi pi-trash"
          severity="danger"
          [rounded]="true"
          [outlined]="true"
          (click)="EliminarRegistro(usuario)"
        ></p-button>
      </td>
    </tr>
  </ng-template>
</p-table> -->

<p-table
  #dt
  [value]="usuarios"
  [paginator]="true"
  [rows]="5"
  editMode="row"
  (onRowEditInit)="onRowEditInit($event.data)"
  (onRowEditSave)="onRowEditSave($event.data)"
  (onRowEditCancel)="onRowEditCancel($event.data, $event.index)"
>
  <ng-template pTemplate="header">
    <tr>
        <th>Sistema</th>
      <th>Nombre</th>
      <th>Clave</th>
      <th>Acciones</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-usuario let-editing="editing">
    <tr [pEditableRow]="usuario">

      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Sistema" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Sistema }}
          </ng-template>
        </p-cellEditor>
      </td>

        <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Nombre" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Nombre }}
          </ng-template>
        </p-cellEditor>
      </td>

      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input pInputText [(ngModel)]="usuario.Clave" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.Clave }}
          </ng-template>
        </p-cellEditor>
      </td>

      <td>
        <button *ngIf="!editing" (click)="dt.initRowEdit(usuario)">‚úèÔ∏è Editar</button>
        <button *ngIf="editing" (click)="dt.saveRowEdit(usuario)">üíæ Guardar</button>
        <button *ngIf="editing" (click)="dt.cancelRowEdit(usuario)">‚ùå Cancelar</button>
      </td>
    </tr>
  </ng-template>
</p-table>


      </p>
    </p-panel>

    <!-- Modal de creaci√≥n/edici√≥n de usuario -->
    <p-dialog
      header="{{ nuevoregistro ? 'Insertar usuario' : 'Editar usuario' }}"
      [modal]="true"
      [(visible)]="visible_ventana"
      [style]="{ width: '30rem' }"
    >

    </p-dialog>
  </div>
